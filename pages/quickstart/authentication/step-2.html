---
layout: quickstart
permalink: /quickstart/authentication/step-2/
---

{% capture markdown %}

# Step 2: Add Login Page

In this step we're going to display a login experience.


### Install Auth0 Package
We're going to be using Auth0 as the authentication service for this quickstart. Run this command to install the
`auth0-lock` client that we'll be using to login to the application:

```sh
npm install autho-lock --save
```

### Add Auth0 Config
In order to use Auth0 as the authentication server, our application needs to know two values:

1. The URL (domain) we should authenticate with
2. The client ID of the application we want to login to

We're going to add these values to lore config. But instead of adding them to existing config file, we're going to
create a new config file just for Auth0.

> The /config folder in Lore is actually compiled into a single object, which you can access from `lore.config`. This
> means you can add your own files to the /config folder and access their values from `lore.config`. It also means you
> can change those values on a per-environment basis by redefining them in the `/env` directory.

Create a new file in `/config` called `auth0.js` and paste in this content:

```js
// config/auth0.js
module.exports = {
  clientId: 'jiY0oBzEEpJuEX738eNl050YAJbPZjbh',
  domain: 'lorejs.auth0.com'
};
```

You'll now be able to access these values from `lore.config.auth0.clientId` and `lore.config.auth0.domain`.


### Create the Login Page
Next create a Login component we'll be using as the login page:

```sh
lore generate component Login
```

This component needs to do three things:

1. Show the Auth0 login dialog when the component is mounted to the page
2. After succesful login, save the user token (that Auth0 will provide) to localStorage
3. Redirect the user to the homepage at the root route (/)

For now, we're only going to focus on the first goal. Update your `Login` component to look like this:

```jsx
var React = require('react');
var Auth0Lock = require('auth0-lock').default;

module.exports = React.createClass({
  displayName: 'Login',

  componentDidMount: function() {
    this.lock = this.getLock();
    this.showLogin();
  },

  getLock: function(){
    var clientId = lore.config.auth0.clientId;
    var domain = lore.config.auth0.domain;

    return new Auth0Lock(clientId, domain, {
      auth: {
        redirect: false,
        sso: false,
        params: {scope: 'openid name email'}
      },
      languageDictionary: {
        title: "Lore Quickstart"
      }
    });
  },

  onAuthentication: function(authResult) {
    // save user token to localStorage
  },

  showLogin: function(){
    this.lock.on('authenticated', this.onAuthentication);
    this.lock.show();
  },

  render: function() {
    return (
      <div/>
    );
  }

});
```

### Create the /login route
Now that the component exists, let's create the corresponding route to display it. Import your `Login` component into
`routes.js` and update the routes to look like this:

```jsx
...
var Login = require('./src/components/Login');

module.exports = (
  <Route>
    <Route path="/login" component={Login} />

    <Route component={UserIsAuthenticated(Master)}>
      <Route path="/" component={Layout}>
        <IndexRoute component={Feed} />
      </Route>
    </Route>
  </Route>
);
```

### Login as one of the Characters
With the routing done, let's test out our Login component. Navigate to `/login` and you should see a login dialog
displayed on screen. While you can't create a new account, you _can_ login as any of the characters below:

* ayla
* crono
* frog
* lucca
* magus
* marle
* robo

The email format is `{name}@example.com`, and the password for all of them is `password`. So if you wanted to login
as marle, you would enter `marle@example.com` for the email and `password` for the password.


### Visual Check-in

If everything went well, your application should now look like this.

![New Lore App](/assets/images/quickstart/step2-visual.png)

## Code Changes

Below is a list of files modified during this step.

### config/auth0.js

{% tabs tab1={"name": "Diff", "id": 1} | tab2={"name": "Source", "id": 2} %}
{% tab id=1, is_active=true %}
![New Lore App](/assets/images/quickstart/step2-diff-header.png)
{% endtab %}
{% tab id=2 %}
```js
module.exports = {
  clientId: 'jiY0oBzEEpJuEX738eNl050YAJbPZjbh',
  domain: 'lorejs.auth0.com'
};
```
{% endtab %}
{% endtabs %}

### routes.js

{% tabs tab1={"name": "Diff", "id": 3} | tab2={"name": "Source", "id": 4} %}
{% tab id=3, is_active=true %}
![New Lore App](/assets/images/quickstart/step2-diff-layout.png)
{% endtab %}
{% tab id=4 %}
```js
var React = require('react');
var Route = require('react-router').Route;
var IndexRoute = require('react-router').IndexRoute;

var Master = require('./src/components/Master');
var Layout = require('./src/components/Layout');
var Feed = require('./src/components/Feed');
var Login = require('./src/components/Login');

module.exports = (
  <Route>
    <Route path="/login" component={Login} />

    <Route component={Master}>
      <Route path="/" component={Layout}>
        <IndexRoute component={Feed} />
      </Route>
    </Route>
  </Route>
);
```
{% endtab %}
{% endtabs %}

### src/components/Login.js

{% tabs tab1={"name": "Diff", "id": 5} | tab2={"name": "Source", "id": 6} %}
{% tab id=5, is_active=true %}
![New Lore App](/assets/images/quickstart/step2-diff-layout.png)
{% endtab %}
{% tab id=6 %}
```js
var React = require('react');
var Header = require('./Header');

module.exports = React.createClass({
  displayName: 'Layout',

  render: function() {
    return (
      <div>
        <Header />
        <div className="container">
          <div className="row">
            <div className="col-md-offset-3 col-md-6">
              {/* Feed will go here */}
            </div>
          </div>
        </div>
      </div>
    );
  }

});
```
{% endtab %}
{% endtabs %}

## Next Steps

Next we're going to [DO SOMETHING](../step-3/).

{% endcapture %}
{{ markdown | markdownify }}
