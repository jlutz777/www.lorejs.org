---
layout: quickstart
permalink: /quickstart/fetching/step-3/
---

{% capture markdown %}

# Step 3: Connect Feed Component

In this step we're going to use the `connect` decorator to enable our Tweet component to declare what data it needs.


### The Connect Decorator
Lore provides a decorator (also known as a Higher Order Component) that allows components to declare what data they
need, and the framework will automatically retrieve it from the API if it doesn't exist.

The decorator is called `connect` and the syntax for using it looks like this:

```jsx
lore.connect(function(getState, props){
  return {
    tweets: getState('tweet.find')
  }
})(Component);
```

> You can learn more about `connect` in the [concept documentation](/concepts/connect/) as well as the documentation
> for [configuring connect](/features/config/connect/).

The first parameter, `getState` is a function that will either retrieve the piece of state requested from the store,
or invoke the appropriate action to retrieve that data if it doesn't exist (such as when the data has not yet been
fetched from the server).

In this example, we're requested `tweet.find`. The `find` reducer is responsible for storing the results of all query
and pagination requests made to the server. Since we aren't passing in any query paramters or pagination information,
this request translates to _"make a call to the /tweets endpoint on the API and give me whatever comes back"_.

That data will then be passed to our Feed component as `tweets` since that is what we named the key.

### Wrap Feed with Connect
To use `connect`, open up your `Feed` component and wrap it with the decorator like this:

{% tabs tab1={"name": "ES5", "id": 101} | tab2={"name": "ES6", "id": 102} | tab3={"name": "ESNext", "id": 103} %}
{% tab id=101, is_active=true %}
```jsx
module.exports = lore.connect(function(getState, props){
  return {
    tweets: getState('tweet.find')
  }
})(
React.createClass({
  ...
})
);
```
{% endtab %}
{% tab id=102 %}
```jsx
class Feed extends React.Component {
  ...
};

export default lore.connect(function(getState, props){
  return {
    tweets: getState('tweet.find')
  }
})(Feed);
```
{% endtab %}
{% tab id=103 %}
```jsx
@lore.connect(function(getState, props){
  return {
    tweets: getState('tweet.find')
  }
})
class Feed extends React.Component {
  ...
};

export default Feed;
```
{% endtab %}
{% endtabs %}

Once you've wrapped the `Feed` component, reload the page, and you'll notice the mock data has been replaced by real
data from the API!

### Visual Check-in

If everything went well, your application should now look like this.

<img class="drop-shadow" src="/assets/images/quickstart/routing/step-3.png">

## Code Changes

Below is a list of files modified during this step, as well as a visual diff to show you what was added or removed
between this step and the last one.

### src/components/Feed.js

{% tabs tab1={"name": "Diff", "id": 1} | tab2={"name": "Source", "id": 2} %}
{% tab id=1, is_active=true %}
![Feed](/assets/images/quickstart/diffs/fetching/step-3-feed.png)
{% endtab %}
{% tab id=2 %}
```jsx
var React = require('react');
var Tweet = require('./Tweet');

module.exports = lore.connect(function(getState, props){
  return {
    tweets: getState('tweet.find')
  }
})(
React.createClass({
  displayName: 'Feed',

  propTypes: {
    tweets: React.PropTypes.object.isRequired
  },

  getStyles: function() {
    return {
      title: {
        textAlign: 'center'
      },
      tweets: {
        marginTop: '32px'
      }
    }
  },

  renderTweet: function(tweet) {
    return (
      <Tweet key={tweet.id} tweet={tweet} />
    );
  },

  render: function () {
    var styles = this.getStyles();
    var tweets = this.props.tweets;

    return (
      <div>
        <h2 style={styles.title}>
          Feed
        </h2>
        <ul className="media-list" style={styles.tweets}>
          {tweets.data.map(this.renderTweet)}
        </ul>
      </div>
    );
  }
})
);
```
{% endtab %}
{% endtabs %}

## Next Steps

Next we're going to [display a loading message while the tweets are being fetched](../step-4/).

{% endcapture %}
{{ markdown | markdownify }}
